FILE(GLOB SELF_SRC     "${CMAKE_CURRENT_SOURCE_DIR}/*.F90")
FILE(GLOB SELFHIP_SRC  "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp")
FILE(GLOB SELF_H "${CMAKE_CURRENT_SOURCE_DIR}/*.h")


# Install libself.a
ADD_LIBRARY(SELF STATIC ${SELF_SRC} ${SELFHIP_SRC})
INSTALL(TARGETS SELF DESTINATION lib)

# Install .h files
INSTALL(FILES ${SELF_H} DESTINATION include)

# Install .mod files generated during build
INSTALL(DIRECTORY ${CMAKE_BINARY_DIR}/include/ DESTINATION include)

# Install self executable
ADD_EXECUTABLE(self ${CMAKE_CURRENT_SOURCE_DIR}/SELF.F90)
TARGET_LINK_LIBRARIES(self SELF ${LIBS})
INSTALL(TARGETS self DESTINATION bin)
