SET(CMAKE_Fortran_FLAGS "${SELF_COMPILER_FLAGS} ${CMAKE_Fortran_FLAGS}")
FILE(GLOB SELF_SRC     "${CMAKE_CURRENT_SOURCE_DIR}/*.F90")
FILE(GLOB SELFHIP_SRC  "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp")

SET(SELF_LIB "self")
SET(CMAKE_Fortran_MODULE_DIRECTORY ${CMAKE_BINARY_DIR}/include)

ADD_LIBRARY(${SELF_LIB} STATIC ${SELF_SRC} ${SELFHIP_SRC})

INSTALL(TARGETS ${SELF_LIB} 
        ARCHIVE DESTINATION lib
        LIBRARY DESTINATION lib)

INSTALL(DIRECTORY ${CMAKE_Fortran_MODULE_DIRECTORY}/ DESTINATION include)
