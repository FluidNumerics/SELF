set(CMAKE_Fortran_FLAGS "${SELF_COMPILER_FLAGS} ${CMAKE_Fortran_FLAGS}")
set(CMAKE_VERBOSE_MAKEFILE ON)
file(GLOB SELF_SRC     "${CMAKE_CURRENT_SOURCE_DIR}/*.F90")
file(GLOB SELFHIP_SRC  "${CMAKE_CURRENT_SOURCE_DIR}/*.cpp")

set(SELF_LIB "self")
set(CMAKE_Fortran_MODULE_DIRECTORY ${CMAKE_BINARY_DIR}/include)

ADD_LIBRARY(${SELF_LIB} STATIC ${SELF_SRC} ${SELFHIP_SRC})

install(TARGETS ${SELF_LIB} 
        ARCHIVE DESTINATION lib
        LIBRARY DESTINATION lib)

install(DIRECTORY ${CMAKE_Fortran_MODULE_DIRECTORY}/ DESTINATION include)
